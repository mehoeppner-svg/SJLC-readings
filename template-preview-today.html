<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Today's Reading - Template Preview</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.8;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        /* Header */
        .page-header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .page-header .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 300;
        }

        /* Date and Reference */
        .reading-info {
            background: #ecf0f1;
            padding: 1.5rem 2rem;
            border-bottom: 3px solid #3498db;
        }

        .reading-date {
            font-size: 0.9rem;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .reading-reference {
            font-size: 1.8rem;
            color: #2c3e50;
            font-weight: 400;
            font-style: italic;
        }

        /* Navigation Bar */
        .reading-navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.25rem 0.75rem;
            background: white;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            color: #2c3e50;
            text-decoration: none;
            font-size: 0.75rem;
            font-family: 'Georgia', 'Times New Roman', serif;
            transition: all 0.2s ease;
            cursor: pointer;
            min-width: 80px;
        }

        .nav-button:hover {
            background: #3498db;
            color: white;
            border-color: #3498db;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }

        .nav-button.today {
            background: #3498db;
            color: white;
            border-color: #3498db;
            font-weight: 600;
        }

        .nav-button.today:hover {
            background: #2980b9;
            border-color: #2980b9;
        }

        .nav-arrow {
            font-size: 0.9rem;
        }

        /* Main Content */
        .content-wrapper {
            padding: 2rem;
        }

        /* Scripture Image */
        .image-section {
            margin-bottom: 2rem;
            text-align: center;
        }

        .scripture-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Audio Player */
        .audio-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid #3498db;
        }

        .audio-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .audio-label::before {
            content: "🔊";
        }

        .bible-audio {
            width: 100%;
            height: 40px;
        }

        /* Display Settings */
        .display-settings {
            margin-bottom: 2rem;
            display: flex;
            justify-content: flex-end;
        }

        .settings-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: #7f8c8d;
            transition: all 0.2s ease;
            padding: 0.25rem;
            line-height: 1;
        }

        .settings-toggle:hover {
            color: #2c3e50;
            transform: rotate(45deg);
        }

        .settings-panel {
            display: none;
            position: absolute;
            background: white;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            z-index: 500;
            min-width: 250px;
            margin-top: 0.5rem;
        }

        .settings-panel.active {
            display: block;
        }

        .settings-panel h3 {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #ecf0f1;
        }

        .settings-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
            cursor: pointer;
            user-select: none;
        }

        .settings-option:hover {
            background: #f8f9fa;
            margin: 0 -0.5rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            border-radius: 4px;
        }

        .settings-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .settings-option label {
            cursor: pointer;
            font-size: 0.95rem;
            color: #2c3e50;
            flex: 1;
        }

        /* Bible Text */
        .bible-text {
            font-size: 1.1rem;
            line-height: 2;
            color: #2c3e50;
        }

        .section-heading {
            font-size: 1.4rem;
            color: #2c3e50;
            margin: 2rem 0 1rem 0;
            font-style: italic;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 0.5rem;
        }

        .bible-text p {
            margin-bottom: 1.5rem;
            text-align: justify;
        }

        .verse-num {
            font-weight: bold;
            color: #3498db;
            font-size: 0.85em;
            vertical-align: super;
            margin-right: 2px;
        }

        /* Footnote Links */
        .footnote {
            color: #3498db;
            text-decoration: none;
            font-size: 0.85em;
            vertical-align: super;
            cursor: pointer;
            padding: 0 2px;
        }

        .footnote:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        /* Footnotes Section */
        .footnotes-section {
            margin-top: 3rem;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 8px;
            border-top: 3px solid #3498db;
        }

        .footnotes-section h3 {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .footnote-item {
            font-size: 0.95rem;
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }

        .footnote-ref {
            color: #3498db;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        /* Commentary Button */
        .commentary-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #3498db;
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .commentary-toggle:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(52, 152, 219, 0.5);
        }

        /* Modal for Footnotes */
        .footnote-modal {
            display: none;
            position: fixed;
            background: white;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 1.5rem;
            max-width: 400px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            z-index: 1000;
        }

        .footnote-modal.active {
            display: block;
        }

        .modal-close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #7f8c8d;
            cursor: pointer;
            width: 30px;
            height: 30px;
            line-height: 1;
        }

        .modal-close:hover {
            color: #2c3e50;
        }

        .modal-content {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #2c3e50;
        }

        /* Side Panel for Commentary */
        .side-panel-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .side-panel-overlay.active {
            display: block;
        }

        .side-panel {
            position: fixed;
            top: 0;
            right: -500px;
            width: 500px;
            height: 100%;
            background: white;
            box-shadow: -4px 0 12px rgba(0,0,0,0.2);
            transition: right 0.3s ease;
            z-index: 1001;
            overflow-y: auto;
        }

        .side-panel.active {
            right: 0;
        }

        .panel-header {
            background: #2c3e50;
            color: white;
            padding: 1.5rem;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .panel-header h2 {
            font-size: 1.5rem;
            font-weight: 300;
        }

        .panel-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            line-height: 1;
        }

        .panel-close:hover {
            opacity: 0.8;
        }

        .panel-content {
            padding: 2rem;
            font-size: 1rem;
            line-height: 1.8;
        }

        /* Copyright */
        .copyright {
            text-align: center;
            padding: 2rem;
            color: #7f8c8d;
            font-size: 0.9rem;
            background: #ecf0f1;
        }

        .copyright a {
            color: #3498db;
            text-decoration: none;
        }

        .copyright a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .page-header h1 {
                font-size: 2rem;
            }

            .reading-reference {
                font-size: 1.4rem;
            }

            .content-wrapper {
                padding: 1.5rem;
            }

            .side-panel {
                width: 100%;
                right: -100%;
            }

            .commentary-toggle {
                bottom: 1rem;
                right: 1rem;
                padding: 0.75rem 1.25rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <h1>The Gospel Project</h1>
            <div class="subtitle">St. John Lutheran Church Boerne, TX</div>
        </div>

        <!-- Navigation -->
        <div class="reading-navigation" style="background: #ecf0f1; padding: 0.6rem 2rem; border-bottom: 1px solid #d5dbdb;">
            <a href="#" class="nav-button" title="Previous Day">
                <span class="nav-arrow">←</span>
                <span>Previous</span>
            </a>
            <a href="#" class="nav-button today" title="Go to Today">
                <span>Today</span>
            </a>
            <a href="#" class="nav-button" title="Next Day">
                <span>Next</span>
                <span class="nav-arrow">→</span>
            </a>
        </div>

        <!-- Reading Info -->
        <div class="reading-info">
            <div class="reading-date">October 29, 2025</div>
            <div class="reading-reference">Genesis 21:8-21</div>
        </div>

        <!-- Main Content -->
        <div class="content-wrapper">
            <!-- Image -->
            <div class="image-section">
                <img src="https://via.placeholder.com/800x400/f39c12/ffffff?text=Scripture+Illustration"
                     alt="Scripture illustration for Genesis 21:8-21"
                     class="scripture-image">
            </div>

            <!-- Audio Player -->
            <div class="audio-section">
                <div class="audio-label">Listen to ESV Audio</div>
                <audio controls preload="metadata" class="bible-audio">
                    <source src="https://audio.esv.org/david-cochran-heath/mq/01021008-01021021.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </div>

            <!-- Display Settings -->
            <div class="display-settings">
                <button class="settings-toggle" onclick="toggleSettings(event)" title="Display Options">
                    ⚙️
                </button>
                <div class="settings-panel" id="settingsPanel">
                    <h3>Display Options</h3>
                    <div class="settings-option" onclick="toggleCheckbox('chapterNumbers')">
                        <input type="checkbox" id="chapterNumbers" checked onclick="event.stopPropagation(); updateDisplay()">
                        <label for="chapterNumbers">Chapter Numbers</label>
                    </div>
                    <div class="settings-option" onclick="toggleCheckbox('verseNumbers')">
                        <input type="checkbox" id="verseNumbers" checked onclick="event.stopPropagation(); updateDisplay()">
                        <label for="verseNumbers">Verse Numbers</label>
                    </div>
                    <div class="settings-option" onclick="toggleCheckbox('sectionHeadings')">
                        <input type="checkbox" id="sectionHeadings" checked onclick="event.stopPropagation(); updateDisplay()">
                        <label for="sectionHeadings">Section Headings</label>
                    </div>
                    <div class="settings-option" onclick="toggleCheckbox('crossReferences')">
                        <input type="checkbox" id="crossReferences" checked onclick="event.stopPropagation(); updateDisplay()">
                        <label for="crossReferences">Cross References</label>
                    </div>
                    <div class="settings-option" onclick="toggleCheckbox('footnotes')">
                        <input type="checkbox" id="footnotes" checked onclick="event.stopPropagation(); updateDisplay()">
                        <label for="footnotes">Footnotes</label>
                    </div>
                </div>
            </div>

            <!-- Bible Text -->
            <div class="bible-text">
                <h2 class="section-heading">God Protects Hagar and Ishmael</h2>

                <p>
                    <span class="verse-num">8</span> And the child grew and was weaned. And Abraham made a great feast on the day that Isaac was weaned.
                    <span class="verse-num">9</span> But Sarah saw the son of Hagar the Egyptian, whom she had borne to Abraham, laughing.<a href="#footnote-1" class="footnote" data-footnote="[1] 21:9 Possibly <i>laughing in mockery</i>">[1]</a>
                    <span class="verse-num">10</span> So she said to Abraham, "Cast out this slave woman with her son, for the son of this slave woman shall not be heir with my son Isaac."
                    <span class="verse-num">11</span> And the thing was very displeasing to Abraham on account of his son.
                    <span class="verse-num">12</span> But God said to Abraham, "Be not displeased because of the boy and because of your slave woman. Whatever Sarah says to you, do as she tells you, for through Isaac shall your offspring be named.
                    <span class="verse-num">13</span> And I will make a nation of the son of the slave woman also, because he is your offspring."
                    <span class="verse-num">14</span> So Abraham rose early in the morning and took bread and a skin of water and gave it to Hagar, putting it on her shoulder, along with the child, and sent her away. And she departed and wandered in the wilderness of Beersheba.
                </p>

                <p>
                    <span class="verse-num">15</span> When the water in the skin was gone, she put the child under one of the bushes.
                    <span class="verse-num">16</span> Then she went and sat down opposite him a good way off, about the distance of a bowshot, for she said, "Let me not look on the death of the child." And as she sat opposite him, she lifted up her voice and wept.
                    <span class="verse-num">17</span> And God heard the voice of the boy, and the angel of God called to Hagar from heaven and said to her, "What troubles you, Hagar? Fear not, for God has heard the voice of the boy where he is.
                    <span class="verse-num">18</span> Up! Lift up the boy, and hold him fast with your hand, for I will make him into a great nation."
                    <span class="verse-num">19</span> Then God opened her eyes, and she saw a well of water. And she went and filled the skin with water and gave the boy a drink.
                    <span class="verse-num">20</span> And God was with the boy, and he grew up. He lived in the wilderness and became an expert with the bow.
                    <span class="verse-num">21</span> He lived in the wilderness of Paran, and his mother took a wife for him from the land of Egypt.
                </p>
            </div>

            <!-- Footnotes -->
            <div class="footnotes-section">
                <h3>Footnotes</h3>
                <div class="footnote-item">
                    <span class="footnote-ref">[1]</span>
                    <span id="footnote-1">21:9 Possibly <i>laughing in mockery</i></span>
                </div>
            </div>
        </div>

        <!-- Copyright -->
        <div class="copyright">
            <p style="margin-bottom: 1rem;">
                Scripture quotations are from the ESV® Bible (The Holy Bible, English Standard Version®),
                copyright © 2001 by <a href="https://www.crossway.org" target="_blank">Crossway</a>,
                a publishing ministry of Good News Publishers. Used by permission. All rights reserved.
            </p>
            <p style="font-style: italic; color: #95a5a6;">
                Note: I have created this site as a resource for our church community and it is not in any way
                endorsed or supported by St. John Lutheran Church.
            </p>
        </div>
    </div>

    <!-- Commentary Toggle Button -->
    <button class="commentary-toggle" onclick="openCommentary()">
        📖 View Commentary
    </button>

    <!-- Footnote Modal -->
    <div class="footnote-modal" id="footnoteModal">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <div class="modal-content" id="modalContent">
            <!-- Content populated by JavaScript -->
        </div>
    </div>

    <!-- Side Panel Overlay -->
    <div class="side-panel-overlay" id="sidePanelOverlay" onclick="closeCommentary()"></div>

    <!-- Side Panel -->
    <div class="side-panel" id="sidePanel">
        <div class="panel-header">
            <h2>Commentary</h2>
            <button class="panel-close" onclick="closeCommentary()">&times;</button>
        </div>
        <div class="panel-content">
            <h3 style="margin-bottom: 1rem; color: #2c3e50;">Context and Background</h3>
            <p style="margin-bottom: 1rem;">
                This passage occurs after Isaac's birth and Sarah's concern about Ishmael's presence in the household.
                The tension between Sarah and Hagar reflects the complex family dynamics that resulted from Abraham's
                attempt to fulfill God's promise through his own means.
            </p>

            <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: #2c3e50;">Key Themes</h3>
            <p style="margin-bottom: 1rem;">
                <strong>God's Providence:</strong> Even in difficult circumstances, God provides for Hagar and Ishmael,
                demonstrating His care extends beyond the chosen line of Isaac.
            </p>
            <p style="margin-bottom: 1rem;">
                <strong>Promise and Fulfillment:</strong> God reaffirms that the covenant promise will come through Isaac,
                while also promising to make Ishmael into a great nation because he is Abraham's offspring.
            </p>
            <p style="margin-bottom: 1rem;">
                <strong>Divine Compassion:</strong> God hears the cry of the suffering and responds with mercy,
                opening Hagar's eyes to see the provision already present.
            </p>

            <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: #2c3e50;">Application</h3>
            <p>
                This passage reminds us that God sees and hears those who are marginalized and suffering.
                Just as He provided for Hagar in the wilderness, He promises to care for us in our times of need.
            </p>
        </div>
    </div>

    <script>
        // Settings Panel Functions
        function toggleSettings(event) {
            event.stopPropagation();
            const panel = document.getElementById('settingsPanel');
            panel.classList.toggle('active');
        }

        function toggleCheckbox(checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            checkbox.checked = !checkbox.checked;
            updateDisplay();
        }

        function updateDisplay() {
            const chapterNumbers = document.getElementById('chapterNumbers').checked;
            const verseNumbers = document.getElementById('verseNumbers').checked;
            const sectionHeadings = document.getElementById('sectionHeadings').checked;
            const crossReferences = document.getElementById('crossReferences').checked;
            const footnotes = document.getElementById('footnotes').checked;

            // Show/hide verse numbers
            document.querySelectorAll('.verse-num').forEach(el => {
                el.style.display = verseNumbers ? 'inline' : 'none';
            });

            // Show/hide section headings
            document.querySelectorAll('.section-heading').forEach(el => {
                el.style.display = sectionHeadings ? 'block' : 'none';
            });

            // Show/hide footnotes
            document.querySelectorAll('.footnote').forEach(el => {
                el.style.display = footnotes ? 'inline' : 'none';
            });

            // Show/hide footnotes section
            document.querySelector('.footnotes-section').style.display = footnotes ? 'block' : 'none';

            // Note: Chapter numbers and cross references would be implemented similarly
            // when actual ESV HTML content is present
            console.log('Display settings updated:', {
                chapterNumbers,
                verseNumbers,
                sectionHeadings,
                crossReferences,
                footnotes
            });
        }

        // Close settings panel when clicking outside
        document.addEventListener('click', function(e) {
            const panel = document.getElementById('settingsPanel');
            const toggle = document.querySelector('.settings-toggle');

            if (panel.classList.contains('active') &&
                !panel.contains(e.target) &&
                !toggle.contains(e.target)) {
                panel.classList.remove('active');
            }
        });

        // Footnote Modal Functions
        function openModal(content, x, y) {
            const modal = document.getElementById('footnoteModal');
            const modalContent = document.getElementById('modalContent');

            modalContent.innerHTML = content;
            modal.classList.add('active');

            // Position modal near click location
            const modalWidth = 400;
            const modalHeight = modal.offsetHeight || 150;

            // Adjust position to keep modal on screen
            let left = x;
            let top = y + 10;

            if (left + modalWidth > window.innerWidth) {
                left = window.innerWidth - modalWidth - 20;
            }

            if (top + modalHeight > window.innerHeight) {
                top = y - modalHeight - 10;
            }

            modal.style.left = left + 'px';
            modal.style.top = top + 'px';
        }

        function closeModal() {
            document.getElementById('footnoteModal').classList.remove('active');
        }

        // Commentary Panel Functions
        function openCommentary() {
            document.getElementById('sidePanel').classList.add('active');
            document.getElementById('sidePanelOverlay').classList.add('active');
        }

        function closeCommentary() {
            document.getElementById('sidePanel').classList.remove('active');
            document.getElementById('sidePanelOverlay').classList.remove('active');
        }

        // Footnote Click Handlers
        document.querySelectorAll('.footnote').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const footnoteText = this.getAttribute('data-footnote');
                openModal(footnoteText, e.clientX, e.clientY);
            });
        });

        // ESC key to close
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                closeCommentary();
            }
        });

        // Click outside modal to close
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('footnoteModal');
            if (modal.classList.contains('active') && !modal.contains(e.target) && !e.target.classList.contains('footnote')) {
                closeModal();
            }
        });
    </script>
</body>
</html>
