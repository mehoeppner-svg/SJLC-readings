<!-- Google Sites Embedded Element: Daily Reading Page -->
<!-- This file is designed to be embedded in Google Sites without html/head/body tags -->

<style>
/* ===== VARIABLES ===== */
:root {
    --bible-serif-font: "Sentinel", "Gentium Plus", Georgia, Times, serif;
    --bible-sans-font: "Gotham", Helvetica, Arial, sans-serif;
    --bible-text-color: #424547;
    --bible-secondary-color: #5e6266;
    --bible-tertiary-color: #9a9fa3;
    --bible-link-color: #72abbf;
    --bible-bg-color: #fff;
    --bible-border-color: #dce0e3;
    --bible-serif-size: 1.1rem;
    --bible-line-height: 1.7rem;
    --accent-color: #72abbf;
    --footnote-color: #c07830;
    --crossref-color: #3a8fb7;
}

/* ===== MAIN CONTAINER ===== */
.daily-reading-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem 1rem;
    font-family: var(--bible-sans-font);
    color: var(--bible-text-color);
}

/* ===== HEADER SECTION ===== */
.reading-header {
    position: relative;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 1.5rem;
}

.reading-title {
    font-family: var(--bible-serif-font);
    font-size: 1.5rem;
    font-weight: 500;
    font-style: italic;
    color: var(--bible-text-color);
    text-align: center;
    margin: 0;
}

.reading-date {
    font-size: 0.9rem;
    color: var(--bible-secondary-color);
    text-align: center;
    margin-top: 0.3rem;
    letter-spacing: 0.5px;
}

/* Settings Gear Button - Inside bible content box top-right */
.settings-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: white;
    border: 1px solid var(--bible-border-color);
    border-radius: 4px;
    width: auto;
    height: auto;
    padding: 0.3rem 0.4rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 1.3rem;
    color: var(--bible-secondary-color);
    z-index: 100;
}

/* Settings button wrapper for positioning context */
.settings-wrapper {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    z-index: 100;
}

.settings-wrapper .settings-btn {
    position: relative;
    top: 0;
    right: 0;
}

.settings-btn:hover {
    color: var(--accent-color);
    border-color: var(--accent-color);
}

/* Settings Dropdown Menu */
.settings-menu {
    position: absolute;
    bottom: calc(100% + 0.5rem);
    right: 0;
    background: white;
    border: 1px solid var(--bible-border-color);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 0.5rem 0;
    min-width: 180px;
    display: none;
    z-index: 1000;
}

.settings-menu.active {
    display: block;
}

.settings-menu h4 {
    font-size: 0.85rem;
    font-weight: 600;
    margin: 0 0 0.5rem 0;
    padding: 0 0.75rem;
    color: var(--bible-secondary-color);
}

.settings-menu label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.4rem 0.75rem;
    cursor: pointer;
    transition: background 0.2s ease;
    font-size: 0.85rem;
}

.settings-menu label:hover {
    background: #f8f9fa;
}

.settings-menu input[type="checkbox"] {
    cursor: pointer;
    width: 16px;
    height: 16px;
}

/* ===== SHARE BUTTON ===== */
/* Positioned above bible content box to the right */
.share-section {
    position: absolute;
    right: 0.5rem;
    top: -2.5rem;
    z-index: 90;
}

.share-btn {
    background: white;
    border: 1px solid var(--bible-border-color);
    border-radius: 4px;
    padding: 0.5rem 0.7rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.9rem;
    color: var(--bible-text-color);
    transition: all 0.2s ease;
    white-space: nowrap;
}

.share-text {
    font-weight: 500;
    order: 2;
}

.share-icon {
    font-size: 1.1rem;
    display: inline-block;
    order: 1;
}

.share-btn:hover {
    background: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
}

/* ===== VERSE CARD SECTION ===== */
.verse-card-container {
    max-width: 400px;
    margin: 0 auto 0.5rem auto;
}

.verse-card-section {
    position: relative;
    border-radius: 8px;
    padding: 0;
    text-align: center;
    color: white;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    overflow: hidden;
}

.verse-card-section.hidden {
    display: none;
}

.verse-card-image {
    width: 400px;
    height: 225px;
    display: block;
    object-fit: cover;
    filter: brightness(0.7);
}

.verse-card-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    background: rgba(0,0,0,0.3);
}

.verse-card-text {
    font-family: var(--bible-serif-font);
    font-size: 0.95rem;
    font-style: italic;
    line-height: 1.4;
    margin-bottom: 0.4rem;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

.verse-card-reference {
    font-size: 0.75rem;
    font-weight: 500;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.verse-card-copy-btn {
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.5);
    color: white;
    padding: 0.3rem 0.7rem;
    border-radius: 4px;
    margin-top: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.7rem;
}

.verse-card-copy-btn:hover {
    background: rgba(255,255,255,0.3);
    border-color: rgba(255,255,255,0.7);
}

/* ===== IMAGE SECTION ===== */
.image-section {
    text-align: center;
    margin-bottom: 1.5rem;
}

.image-section.hidden {
    display: none;
}

.scripture-image {
    max-width: 100%;
    height: auto;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* ===== AUDIO SECTION ===== */
.audio-section {
    text-align: center;
    margin-bottom: 1.5rem;
    padding: 0.4rem 0.6rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 6px;
    border: 1px solid #dee2e6;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}

.audio-section.hidden {
    display: none;
}

.audio-label {
    display: none; /* Hide the label to save space */
}

.bible-audio {
    width: 100%;
    height: 32px;
    border-radius: 4px;
    outline: none;
}

/* ===== BIBLE CONTENT (ESV STYLES) ===== */
.bible-content-container {
    position: relative;
    max-width: 900px;
    margin: 3rem auto 2rem auto;
}

.bible-content {
    font-family: var(--bible-serif-font);
    font-size: var(--bible-serif-size);
    font-weight: 300;
    line-height: var(--bible-line-height);
    color: var(--bible-text-color);
    background: var(--bible-bg-color);
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid var(--bible-border-color);
}

.bible-content h3 {
    clear: both;
    font-family: var(--bible-serif-font);
    font-size: 1.1rem;
    font-style: italic;
    font-weight: 300;
    line-height: var(--bible-line-height);
    margin: 0.8rem 0 0 0;
    color: var(--bible-text-color);
}

.bible-content h4 {
    font-size: 0.95rem;
    font-style: italic;
    color: var(--bible-secondary-color);
    margin: 0.5rem 0;
}

.bible-content p {
    font-family: var(--bible-serif-font);
    font-size: var(--bible-serif-size);
    font-weight: 300;
    line-height: var(--bible-line-height);
    margin: 0;
    text-indent: 2rem;
}

.bible-content p.starts-chapter {
    text-indent: 0;
}

.bible-content .chapter-num {
    float: left;
    font-size: 3.2rem;
    font-weight: 400;
    padding-top: 0.65rem;
    margin-left: -0.3rem;
    line-height: 1;
}

.bible-content .verse-num {
    font-family: var(--bible-sans-font);
    font-size: 0.7rem;
    font-weight: 400;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
    top: -0.4rem;
    padding: 0 0.15rem;
    color: var(--bible-secondary-color);
}

/* Footnotes - Numbers in brown/orange */
.bible-content .footnote {
    position: relative;
    top: -0.4rem;
    font-size: 0.75rem;
    line-height: 0;
}

.bible-content .footnote a.fn {
    color: var(--footnote-color);
    text-decoration: none;
    font-weight: 600;
    padding: 0 2px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.bible-content .footnote a.fn:hover {
    color: #a05520;
    text-decoration: underline;
}

.bible-content .footnote a.fn::before {
    content: "[";
}

.bible-content .footnote a.fn::after {
    content: "]";
}

/* Crossrefs - Letters in blue */
.bible-content .crossref {
    position: relative;
    top: -0.4rem;
    font-size: 0.75rem;
    line-height: 0;
}

.bible-content .crossref a.cr {
    color: var(--crossref-color);
    text-decoration: none;
    font-weight: 600;
    font-style: italic;
    padding: 0 2px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.bible-content .crossref a.cr:hover {
    color: #2a6f97;
    text-decoration: underline;
}

.bible-content .crossref a.cr::before {
    content: "(";
}

.bible-content .crossref a.cr::after {
    content: ")";
}

/* Hide footnotes/crossrefs when toggled */
.bible-content.hide-footnotes .footnote {
    display: none;
}

.bible-content.hide-crossrefs .crossref {
    display: none;
}

/* Poetry/line styling */
.bible-content .line {
    display: block;
    text-indent: -4rem;
    padding-left: 6rem;
}

.bible-content .indent.line {
    text-indent: -3rem;
    padding-left: 6rem;
}

.bible-content .block-indent {
    margin: 0;
}

/* Footnotes section at bottom */
.bible-content .footnotes {
    border-top: 1px solid var(--bible-border-color);
    margin-top: 2rem;
    padding-top: 1.2rem;
}

.bible-content .footnotes.hidden {
    display: none;
}

.bible-content .footnotes h3 {
    font-family: var(--bible-sans-font);
    font-size: 1.1rem;
    font-weight: 500;
    font-style: normal;
    margin-bottom: 0.6rem;
    color: var(--footnote-color);
}

.bible-content .footnotes p {
    font-size: 0.95rem;
    line-height: 1.5rem;
    text-indent: 0;
    margin-bottom: 0.5rem;
}

.bible-content .footnote-ref {
    color: var(--footnote-color);
    font-weight: 600;
}

/* Copyright notice */
.bible-content .copyright {
    color: var(--bible-link-color);
    font-family: var(--bible-sans-font);
    font-size: 0.9rem;
    font-weight: 500;
    text-decoration: none;
    text-align: center;
    display: block;
    margin-top: 1.2rem;
}

/* ===== MODAL POPUP ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    z-index: 9998;
}

.modal-overlay.active {
    display: block;
}

.modal-popup {
    position: absolute;
    background: white;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    padding: 1.5rem;
    max-width: 400px;
    z-index: 9999;
    display: none;
}

.modal-popup.active {
    display: block;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--bible-border-color);
}

.modal-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
}

.modal-title.footnote {
    color: var(--footnote-color);
}

.modal-title.crossref {
    color: var(--crossref-color);
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--bible-secondary-color);
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
}

.modal-close:hover {
    background: #f0f0f0;
}

.modal-content {
    font-size: 0.95rem;
    line-height: 1.6;
    color: var(--bible-text-color);
}

.modal-content .verse-ref {
    font-weight: 600;
    color: var(--crossref-color);
    margin-bottom: 0.5rem;
    display: block;
}

.modal-content .esv-link {
    display: inline-block;
    margin-top: 1rem;
    color: var(--bible-link-color);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
}

.modal-content .esv-link:hover {
    color: #5e9aac;
    text-decoration: underline;
}

/* ===== COMMENTARY & DEVOTIONAL SECTION ===== */
.additional-content {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
    flex-wrap: wrap;
}

.content-btn {
    flex: 1;
    min-width: 200px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.content-btn.devotional {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.content-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.25);
}

.content-btn:active {
    transform: translateY(-1px);
}

.content-btn .icon {
    font-size: 1.2rem;
}

/* ===== SIDE PANEL OVERLAY ===== */
.side-panel-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
}

.side-panel-overlay.active {
    display: block;
}

.side-panel {
    position: fixed;
    right: -500px;
    top: 0;
    bottom: 0;
    width: 90%;
    max-width: 500px;
    background: white;
    box-shadow: -4px 0 20px rgba(0,0,0,0.3);
    overflow-y: auto;
    transition: right 0.3s ease;
    z-index: 10001;
}

.side-panel.active {
    right: 0;
}

.side-panel-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1.5rem;
    position: sticky;
    top: 0;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.side-panel-header.devotional {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
}

.side-panel-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin: 0;
}

.side-panel-close {
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.3);
    color: white;
    font-size: 1.5rem;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.side-panel-close:hover {
    background: rgba(255,255,255,0.3);
}

.side-panel-content {
    padding: 2rem;
    line-height: 1.8;
}

.side-panel-content h3 {
    color: var(--bible-text-color);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

.side-panel-content p {
    margin-bottom: 1rem;
    text-indent: 0;
}

/* ===== ANIMATIONS ===== */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .daily-reading-container {
        padding: 1rem 0.5rem;
    }

    .reading-header {
        padding: 0.75rem 1rem;
    }

    .reading-title {
        font-size: 1.3rem;
    }

    .verse-card-container {
        max-width: 360px;
    }

    .verse-card-image {
        width: 360px;
        height: 203px;
    }

    .share-section {
        right: 0.5rem;
        top: -2.5rem;
    }

    .settings-btn {
        font-size: 1.1rem;
        padding: 0.25rem 0.35rem;
    }

    .share-btn {
        font-size: 0.85rem;
        padding: 0.4rem 0.6rem;
    }

    .share-icon {
        font-size: 1rem;
    }

    .verse-card-text {
        font-size: 0.85rem;
    }

    .verse-card-reference {
        font-size: 0.7rem;
    }

    .verse-card-overlay {
        padding: 0.8rem;
    }

    .audio-section {
        padding: 0.3rem 0.5rem;
        max-width: 360px;
    }

    .bible-audio {
        height: 30px;
    }

    .bible-content {
        padding: 1rem;
        font-size: 1rem;
    }

    .bible-content .chapter-num {
        font-size: 2.8rem;
    }

    .additional-content {
        flex-direction: column;
    }

    .content-btn {
        min-width: 100%;
    }

    .side-panel {
        width: 100%;
        max-width: 100%;
    }

    .modal-popup {
        max-width: 90%;
        left: 5% !important;
        right: 5%;
    }

    .share-section {
        position: static;
        margin: 0.5rem auto 0 auto;
        display: flex;
        justify-content: center;
    }

    .share-btn {
        width: auto;
    }
}

/* ===== VERSE SELECTION ===== */
.verse-wrapper {
    cursor: pointer;
    display: inline;
    transition: all 0.2s ease;
    border-bottom: 2px solid transparent;
}

.verse-wrapper:hover {
    border-bottom: 2px dotted var(--accent-light, #c5dce5);
}

.verse-wrapper.selected {
    border-bottom: 2px dotted var(--accent-color);
    background-color: rgba(114, 171, 191, 0.05);
}

/* ===== FLOATING COPY BUTTON (FAB) ===== */
.copy-fab {
    position: absolute;
    top: 0.5rem;
    right: 3.5rem; /* Position to left of gear icon */
    display: none;
    flex-direction: row; /* Horizontal layout */
    align-items: center;
    gap: 0.3rem;
    z-index: 101; /* Above gear icon (100) */
    animation: fabFadeIn 0.2s ease;
}

.copy-fab.visible {
    display: flex;
}

@keyframes fabFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.copy-button {
    background: white;
    color: var(--accent-color);
    border: 1px solid var(--bible-border-color);
    border-radius: 4px;
    width: auto;
    height: auto;
    padding: 0.3rem 0.4rem;
    cursor: pointer;
    box-shadow: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    transition: all 0.2s ease;
    position: relative;
}

.copy-button:hover {
    color: white;
    background: var(--accent-color);
    border-color: var(--accent-color);
}

.verse-count-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #e74c3c;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.65rem;
    font-weight: bold;
    border: 2px solid white;
}

.clear-selection-button {
    background: white;
    color: var(--bible-secondary-color);
    border: 1px solid var(--bible-border-color);
    border-radius: 4px;
    width: auto;
    height: auto;
    padding: 0.3rem 0.4rem;
    cursor: pointer;
    box-shadow: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: all 0.2s ease;
}

.clear-selection-button:hover {
    background: #e74c3c;
    color: white;
    border-color: #e74c3c;
}

/* ===== TOAST NOTIFICATION ===== */
.verse-toast {
    position: fixed;
    bottom: 6rem;
    right: 2rem;
    background: #27ae60;
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease;
    z-index: 10003;
    pointer-events: none;
}

.verse-toast.show {
    opacity: 1;
    transform: translateY(0);
}

/* ===== RESPONSIVE (Verse Selection) ===== */
@media (max-width: 768px) {
    .copy-fab {
        top: 0.5rem;
        right: 3rem; /* Adjust for smaller gear icon on mobile */
    }

    .copy-button {
        font-size: 1.1rem;
        padding: 0.25rem 0.35rem;
    }

    .clear-selection-button {
        font-size: 1rem;
        padding: 0.25rem 0.35rem;
    }

    .verse-count-badge {
        width: 16px;
        height: 16px;
        font-size: 0.6rem;
    }

    .verse-toast {
        bottom: 5rem;
        right: 1rem;
        left: 1rem;
        text-align: center;
    }
}
</style>

<!-- Main Container -->
<div class="daily-reading-container">

    <!-- Invisible scroll anchor for commentary/devotional -->
    <div id="scroll-top-anchor" style="position: absolute; top: 0; left: 0; width: 1px; height: 1px;"></div>

    <!-- Header -->
    <div class="reading-header">
        <h1 class="reading-title">Genesis 1:1-13</h1>
        <div class="reading-date">September 8, 2025</div>
    </div>

    <!-- Verse Card Container -->
    <div class="verse-card-container">
        <!-- Verse Card Section (or plain image if no verse card) -->
        <div class="verse-card-section" id="verseCard">
            <img src="https://drive.google.com/thumbnail?id=1gEmFO1N76l-3A1GAdMYKQzg-Ga6QlGPm&sz=w400"
                 alt="Genesis 1:1"
                 class="verse-card-image">
            <div class="verse-card-overlay">
                <div class="verse-card-text">
                    "In the beginning, God created the heavens and the earth."
                </div>
                <div class="verse-card-reference">‚Äî Genesis 1:1</div>
                <button class="verse-card-copy-btn">Copy Verse Card</button>
            </div>
        </div>
    </div>

    <!-- Audio Player -->
    <div class="audio-section" id="audioSection">
        <span class="audio-label">üéß Listen to ESV Audio</span>
        <audio controls preload="metadata" class="bible-audio">
            <source src="https://audio.esv.org/david-cochran-heath/mq/01001001-01001013.mp3" type="audio/mpeg">
            <a href="https://audio.esv.org/david-cochran-heath/mq/01001001-01001013.mp3">Download Audio</a>
        </audio>
    </div>

    <!-- Bible Content Container (for positioning settings/share) -->
    <div class="bible-content-container">

        <!-- Settings Wrapper (provides positioning context) -->
        <div class="settings-wrapper">
            <!-- Floating Copy Button (FAB) for Verse Selection -->
            <div class="copy-fab" id="copyFab">
                <button class="clear-selection-button" id="clearSelectionBtn" title="Clear selection">√ó</button>
                <button class="copy-button" id="copyVerseBtn" title="Copy selected verses">
                    üìã
                    <span class="verse-count-badge" id="verseCountBadge">0</span>
                </button>
            </div>

            <!-- Settings Button (inside bible content box) -->
            <button class="settings-btn" id="settingsBtn" title="Display Settings">‚öôÔ∏è</button>

            <!-- Settings Menu -->
            <div class="settings-menu" id="settingsMenu">
                <h4>Display Settings</h4>
                <label>
                    <input type="checkbox" id="toggleImage" checked>
                    <span>Verse Card</span>
                </label>
                <label>
                    <input type="checkbox" id="toggleAudio" checked>
                    <span>Audio Player</span>
                </label>
                <label>
                    <input type="checkbox" id="toggleFootnotes" checked>
                    <span>Footnotes</span>
                </label>
                <label>
                    <input type="checkbox" id="toggleCrossrefs" checked>
                    <span>Cross-References</span>
                </label>
            </div>
        </div>

        <!-- Share Button (outside bible content box to the right) -->
        <div class="share-section">
            <button class="share-btn" id="shareBtn" title="Share this reading">
                <span class="share-icon">‚Ü±</span>
                <span class="share-text">Share</span>
            </button>
        </div>

        <!-- Bible Content (ESV Styled) -->
        <div class="bible-content" id="bibleContent">
            <h3 id="p01001001_01-1">The Creation of the World</h3>

        <p id="p01001001_06-1" class="starts-chapter">
            <b class="chapter-num" id="v01001001-1">1</b>In the beginning, God created the heavens and the earth.
            <b class="verse-num" id="v01001002-1">2</b>The earth was without form and void, and darkness was over the face of the deep. And the Spirit of God was hovering over the face of the waters.
        </p>

        <p id="p01001002_06-1">
            <b class="verse-num" id="v01001003-1">3</b>And God said, "Let there be light," and there was light.
            <b class="verse-num" id="v01001004-1">4</b>And God saw that the light was good. And God separated the light from the darkness.
            <b class="verse-num" id="v01001005-1">5</b>God called the light Day, and the darkness he called Night. And there was evening and there was morning, the first day.
        </p>

        <p id="p01001005_06-1">
            <b class="verse-num" id="v01001006-1">6</b>And God said, "Let there be an expanse<sup class="footnote"><a class="fn" href="#f1-1" id="fb1-1" data-footnote="Or a canopy; also verses 7, 8, 14, 15, 17, 20">1</a></sup> in the midst of the waters, and let it separate the waters from the waters."
            <b class="verse-num" id="v01001007-1">7</b>And God made<sup class="footnote"><a class="fn" href="#f2-1" id="fb2-1" data-footnote="Or fashioned; also verse 16">2</a></sup> the expanse and separated the waters that were under the expanse from the waters that were above the expanse. And it was so.
            <b class="verse-num" id="v01001008-1">8</b>And God called the expanse Heaven.<sup class="footnote"><a class="fn" href="#f3-1" id="fb3-1" data-footnote="Or Sky; also verses 9, 14, 15, 17, 20, 26, 28, 30; 2:1">3</a></sup> And there was evening and there was morning, the second day.
        </p>

        <p id="p01001008_06-1">
            <b class="verse-num" id="v01001009-1">9</b>And God said, "Let the waters under the heavens be gathered together into one place, and let the dry land appear." And it was so.
            <b class="verse-num" id="v01001010-1">10</b>God called the dry land Earth,<sup class="footnote"><a class="fn" href="#f4-1" id="fb4-1" data-footnote="Or Land; also verses 11, 12, 22, 24, 25, 26, 28, 30; 2:1">4</a></sup> and the waters that were gathered together he called Seas. And God saw that it was good.
        </p>

        <p id="p01001010_06-1">
            <b class="verse-num" id="v01001011-1">11</b>And God said, "Let the earth sprout vegetation, plants<sup class="footnote"><a class="fn" href="#f5-1" id="fb5-1" data-footnote="Or small plants; also verses 12, 29">5</a></sup> yielding seed, and fruit trees bearing fruit in which is their seed, each according to its kind, on the earth." And it was so.
            <b class="verse-num" id="v01001012-1">12</b>The earth brought forth vegetation, plants yielding seed according to their own kinds, and trees bearing fruit in which is their seed, each according to its kind. And God saw that it was good.
            <b class="verse-num" id="v01001013-1">13</b>And there was evening and there was morning, the third day.
        </p>

        <!-- Footnotes Section -->
        <div class="footnotes" id="footnotesSection">
            <h3>Footnotes</h3>
            <p>
                <span class="footnote" id="f1-1">[1]</span>
                <span class="footnote-ref">1:6</span> Or <i>a canopy</i>; also verses 7, 8, 14, 15, 17, 20
            </p>
            <p>
                <span class="footnote" id="f2-1">[2]</span>
                <span class="footnote-ref">1:7</span> Or <i>fashioned</i>; also verse 16
            </p>
            <p>
                <span class="footnote" id="f3-1">[3]</span>
                <span class="footnote-ref">1:8</span> Or <i>Sky</i>; also verses 9, 14, 15, 17, 20, 26, 28, 30; 2:1
            </p>
            <p>
                <span class="footnote" id="f4-1">[4]</span>
                <span class="footnote-ref">1:10</span> Or <i>Land</i>; also verses 11, 12, 22, 24, 25, 26, 28, 30; 2:1
            </p>
            <p>
                <span class="footnote" id="f5-1">[5]</span>
                <span class="footnote-ref">1:11</span> Or <i>small plants</i>; also verses 12, 29
            </p>
        </div>

        <a href="http://www.esv.org" class="copyright" target="_blank">ESV</a>
        </div>
        <!-- End bible-content -->

    </div>
    <!-- End bible-content-container -->

    <!-- Commentary & Devotional Buttons -->
    <div class="additional-content">
        <button class="content-btn commentary" id="commentaryBtn">
            <span class="icon">üìñ</span>
            <span>Commentary</span>
        </button>
        <button class="content-btn devotional" id="devotionalBtn">
            <span class="icon">‚úùÔ∏è</span>
            <span>Daily Devotional</span>
        </button>
    </div>

</div>

<!-- Modal Overlay for Footnotes/Crossrefs -->
<div class="modal-overlay" id="modalOverlay"></div>
<div class="modal-popup" id="modalPopup">
    <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Footnote</h3>
        <button class="modal-close" id="modalClose">√ó</button>
    </div>
    <div class="modal-content" id="modalContent">
        <!-- Content populated by JavaScript -->
    </div>
</div>

<!-- Side Panel for Commentary/Devotional -->
<div class="side-panel-overlay" id="sidePanelOverlay"></div>
<div class="side-panel" id="sidePanel">
    <div class="side-panel-header" id="sidePanelHeader">
        <h2 class="side-panel-title" id="sidePanelTitle">Commentary</h2>
        <button class="side-panel-close" id="sidePanelClose">√ó</button>
    </div>
    <div class="side-panel-content" id="sidePanelContent">
        <!-- Content populated by JavaScript -->
    </div>
</div>

<!-- Toast Notification for Copy Success -->
<div class="verse-toast" id="verseToast">Verses copied to clipboard!</div>

<script>
// ===== SETTINGS MENU =====
const settingsBtn = document.getElementById('settingsBtn');
const settingsMenu = document.getElementById('settingsMenu');
const verseCard = document.getElementById('verseCard');
const audioSection = document.getElementById('audioSection');
const bibleContent = document.getElementById('bibleContent');
const footnotesSection = document.getElementById('footnotesSection');

// Toggle settings menu
settingsBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    settingsMenu.classList.toggle('active');
});

// Close settings menu when clicking outside
document.addEventListener('click', (e) => {
    if (!settingsMenu.contains(e.target) && !settingsBtn.contains(e.target)) {
        settingsMenu.classList.remove('active');
    }
});

// Settings toggles
document.getElementById('toggleImage').addEventListener('change', (e) => {
    verseCard.classList.toggle('hidden', !e.target.checked);
    savePreference('showImage', e.target.checked);
});

document.getElementById('toggleAudio').addEventListener('change', (e) => {
    audioSection.classList.toggle('hidden', !e.target.checked);
    savePreference('showAudio', e.target.checked);
});

document.getElementById('toggleFootnotes').addEventListener('change', (e) => {
    if (!e.target.checked) {
        bibleContent.classList.add('hide-footnotes');
        footnotesSection.classList.add('hidden');
    } else {
        bibleContent.classList.remove('hide-footnotes');
        footnotesSection.classList.remove('hidden');
    }
    savePreference('showFootnotes', e.target.checked);
});

document.getElementById('toggleCrossrefs').addEventListener('change', (e) => {
    bibleContent.classList.toggle('hide-crossrefs', !e.target.checked);
    savePreference('showCrossrefs', e.target.checked);
});

// ===== SHARE FUNCTIONALITY =====
document.getElementById('shareBtn').addEventListener('click', async () => {
    const shareData = {
        title: 'Genesis 1:1-13 - Daily Bible Reading',
        text: 'Check out today\'s Bible reading from The Gospel Project!',
        url: window.location.href
    };

    try {
        if (navigator.share) {
            await navigator.share(shareData);
        } else {
            // Fallback: copy to clipboard
            await navigator.clipboard.writeText(window.location.href);
            alert('Link copied to clipboard!');
        }
    } catch (err) {
        console.log('Share failed:', err);
    }
});

// ===== MODAL POPUP FOR FOOTNOTES/CROSSREFS =====
const modalOverlay = document.getElementById('modalOverlay');
const modalPopup = document.getElementById('modalPopup');
const modalTitle = document.getElementById('modalTitle');
const modalContent = document.getElementById('modalContent');
const modalClose = document.getElementById('modalClose');

// Handle footnote clicks
document.querySelectorAll('.fn').forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const footnoteText = link.getAttribute('data-footnote');
        const verseRef = link.closest('p').querySelector('.verse-num').textContent.trim();

        showModal('Footnote', `<span class="verse-ref">Verse ${verseRef}</span><p>${footnoteText}</p>`, 'footnote', e);
    });
});

// Handle crossref clicks (example - would be populated from API)
document.querySelectorAll('.cr').forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const crossrefText = link.getAttribute('data-crossref') || 'John 1:1-3';

        showModal('Cross Reference', `
            <span class="verse-ref">${crossrefText}</span>
            <p>In the beginning was the Word, and the Word was with God, and the Word was God.</p>
            <a href="https://www.esv.org/${crossrefText.replace(/\s+/g, '+')}" target="_blank" class="esv-link">
                View on ESV.org ‚Üí
            </a>
        `, 'crossref', e);
    });
});

function showModal(title, content, type, event) {
    modalTitle.textContent = title;
    modalTitle.className = `modal-title ${type}`;
    modalContent.innerHTML = content;

    // Position modal ABOVE the click location (not below)
    const rect = event.target.getBoundingClientRect();
    modalPopup.style.bottom = `${window.innerHeight - rect.top - window.scrollY + 10}px`;
    modalPopup.style.top = 'auto';
    modalPopup.style.left = `${Math.max(20, rect.left + window.scrollX - 100)}px`;

    modalOverlay.classList.add('active');
    modalPopup.classList.add('active');
}

function closeModal() {
    modalOverlay.classList.remove('active');
    modalPopup.classList.remove('active');
}

modalClose.addEventListener('click', closeModal);
modalOverlay.addEventListener('click', closeModal);

// ESC key to close modal
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeModal();
        closeSidePanel();
    }
});

// ===== SIDE PANEL FOR COMMENTARY/DEVOTIONAL =====
const sidePanelOverlay = document.getElementById('sidePanelOverlay');
const sidePanel = document.getElementById('sidePanel');
const sidePanelHeader = document.getElementById('sidePanelHeader');
const sidePanelTitle = document.getElementById('sidePanelTitle');
const sidePanelContent = document.getElementById('sidePanelContent');
const sidePanelClose = document.getElementById('sidePanelClose');

document.getElementById('commentaryBtn').addEventListener('click', () => {
    // Reset scroll position BEFORE opening
    sidePanel.scrollTop = 0;

    sidePanelTitle.textContent = 'Commentary on Genesis 1:1-13';
    sidePanelHeader.classList.remove('devotional');
    sidePanelContent.innerHTML = `
        <h3>The Beginning of Creation</h3>
        <p>The opening words of Genesis establish the foundation of all biblical theology: "In the beginning, God created." This simple yet profound statement declares God's sovereignty, power, and intentionality in creation.</p>

        <h3>God's Creative Method</h3>
        <p>Throughout these verses, we see a pattern: God speaks, and it comes into being. This demonstrates the power of God's word and sets a precedent for understanding how God continues to work in the world.</p>

        <h3>The Progressive Revelation</h3>
        <p>Days 1-3 show God creating and separating: light from darkness, waters above from waters below, and sea from dry land. Each act of creation builds upon the previous, showing God's ordered and purposeful design.</p>

        <p><i>Commentary content would continue here, pulled from external sources...</i></p>
    `;
    openSidePanel();

    // Scroll to top anchor within this page
    document.getElementById('scroll-top-anchor').scrollIntoView({ behavior: 'smooth', block: 'start' });
});

document.getElementById('devotionalBtn').addEventListener('click', () => {
    // Reset scroll position BEFORE opening
    sidePanel.scrollTop = 0;

    sidePanelTitle.textContent = 'Daily Devotional';
    sidePanelHeader.classList.add('devotional');
    sidePanelContent.innerHTML = `
        <h3>Created with Purpose</h3>
        <p>As we read about God creating the world, we're reminded that nothing in creation is random or purposeless. God spoke everything into existence with intentionality and love.</p>

        <h3>Reflection</h3>
        <p>Just as God brought order out of chaos in creation, He desires to bring order to the chaos in our lives. Where do you see disorder today? Where do you need God's creative power to speak light into your darkness?</p>

        <h3>Prayer</h3>
        <p>Lord, help me to remember that You are the Creator of all things, including me. Just as You spoke light into the darkness at creation, speak into my life today. Bring order where there is chaos, and help me to rest in Your purposeful design. Amen.</p>

        <p><i>Devotional content would continue here, pulled from external sources...</i></p>
    `;
    openSidePanel();

    // Scroll to top anchor within this page
    document.getElementById('scroll-top-anchor').scrollIntoView({ behavior: 'smooth', block: 'start' });
});

function openSidePanel() {
    sidePanelOverlay.classList.add('active');
    setTimeout(() => sidePanel.classList.add('active'), 10);
}

function closeSidePanel() {
    sidePanel.classList.remove('active');
    setTimeout(() => sidePanelOverlay.classList.remove('active'), 300);
}

sidePanelClose.addEventListener('click', closeSidePanel);
sidePanelOverlay.addEventListener('click', closeSidePanel);

// ===== PREFERENCES (Cookie/LocalStorage) =====
function savePreference(key, value) {
    localStorage.setItem(`gospel_${key}`, JSON.stringify(value));
}

function loadPreferences() {
    const prefs = {
        showImage: JSON.parse(localStorage.getItem('gospel_showImage') ?? 'true'),
        showAudio: JSON.parse(localStorage.getItem('gospel_showAudio') ?? 'true'),
        showFootnotes: JSON.parse(localStorage.getItem('gospel_showFootnotes') ?? 'true'),
        showCrossrefs: JSON.parse(localStorage.getItem('gospel_showCrossrefs') ?? 'true')
    };

    // Apply preferences
    document.getElementById('toggleImage').checked = prefs.showImage;
    document.getElementById('toggleAudio').checked = prefs.showAudio;
    document.getElementById('toggleFootnotes').checked = prefs.showFootnotes;
    document.getElementById('toggleCrossrefs').checked = prefs.showCrossrefs;

    verseCard.classList.toggle('hidden', !prefs.showImage);
    audioSection.classList.toggle('hidden', !prefs.showAudio);

    if (!prefs.showFootnotes) {
        bibleContent.classList.add('hide-footnotes');
        footnotesSection.classList.add('hidden');
    }

    if (!prefs.showCrossrefs) {
        bibleContent.classList.add('hide-crossrefs');
    }
}

// Load preferences on page load
loadPreferences();

// ===== VERSE SELECTION SYSTEM =====
class VerseSelector {
    constructor() {
        this.selectedVerses = new Map(); // verse ID -> {book, chapter, verse, text, element}
        this.bibleContentEl = document.getElementById('bibleContent');
        this.copyFab = document.getElementById('copyFab');
        this.copyBtn = document.getElementById('copyVerseBtn');
        this.clearBtn = document.getElementById('clearSelectionBtn');
        this.verseCountBadge = document.getElementById('verseCountBadge');
        this.toast = document.getElementById('verseToast');

        if (this.bibleContentEl) {
            this.init();
        }
    }

    init() {
        this.wrapVerses();
        this.attachEventListeners();
    }

    // Parse and wrap each verse in a span for selection
    wrapVerses() {
        const paragraphs = this.bibleContentEl.querySelectorAll('p[id^="p"]');

        paragraphs.forEach(p => {
            const verseNums = Array.from(p.querySelectorAll('.verse-num, .chapter-num'));

            verseNums.forEach((verseNum, index) => {
                const verseId = verseNum.id; // e.g., v01001014-1
                if (!verseId) return;

                // Parse verse info from ID (format: v[book][chapter][verse]-1)
                const match = verseId.match(/v(\d{2})(\d{3})(\d{3})-/);
                if (!match) return;

                const [, bookNum, chapterNum, verseNumParsed] = match;
                const book = this.getBookName(parseInt(bookNum));
                const chapter = parseInt(chapterNum);
                const verse = parseInt(verseNumParsed);

                // Find the text between this verse number and the next
                const nextVerseNum = verseNums[index + 1];
                const nodesToWrap = [];
                let currentNode = verseNum.nextSibling;

                while (currentNode && currentNode !== nextVerseNum) {
                    if (currentNode.nodeType === Node.TEXT_NODE && currentNode.textContent.trim()) {
                        nodesToWrap.push(currentNode);
                    } else if (currentNode.nodeType === Node.ELEMENT_NODE &&
                              !currentNode.classList.contains('verse-num') &&
                              !currentNode.classList.contains('chapter-num')) {
                        // Include elements but track footnotes separately
                        nodesToWrap.push(currentNode);
                    }
                    currentNode = currentNode.nextSibling;
                }

                // Create wrapper span
                if (nodesToWrap.length > 0) {
                    const wrapper = document.createElement('span');
                    wrapper.className = 'verse-wrapper';
                    wrapper.dataset.verseId = verseId;
                    wrapper.dataset.book = book;
                    wrapper.dataset.chapter = chapter;
                    wrapper.dataset.verse = verse;

                    // Insert wrapper after verse number
                    verseNum.parentNode.insertBefore(wrapper, verseNum.nextSibling);

                    // Move nodes into wrapper
                    nodesToWrap.forEach(node => {
                        wrapper.appendChild(node);
                    });
                }
            });
        });
    }

    // Attach event listeners
    attachEventListeners() {
        // Verse click selection
        this.bibleContentEl.addEventListener('click', (e) => {
            const verseWrapper = e.target.closest('.verse-wrapper');
            if (verseWrapper && !e.target.closest('.footnote') && !e.target.closest('.crossref')) {
                this.toggleVerseSelection(verseWrapper);
            }
        });

        // Copy button
        this.copyBtn.addEventListener('click', () => {
            this.copySelectedVerses();
        });

        // Clear button
        this.clearBtn.addEventListener('click', () => {
            this.clearSelection();
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+C to copy selected verses
            if ((e.ctrlKey || e.metaKey) && e.key === 'c' && this.selectedVerses.size > 0) {
                e.preventDefault();
                this.copySelectedVerses();
            }
            // ESC key to clear selections
            if (e.key === 'Escape' && this.selectedVerses.size > 0) {
                this.clearSelection();
            }
        });

        // Click outside to clear (but not when clicking modals/overlays)
        document.addEventListener('click', (e) => {
            // Don't clear if clicking on modal overlay, modal popup, or their children
            const isModalClick = e.target.closest('.modal-overlay') ||
                                e.target.closest('.modal-popup') ||
                                e.target.closest('.side-panel-overlay') ||
                                e.target.closest('.side-panel');

            if (!isModalClick &&
                !this.bibleContentEl.contains(e.target) &&
                !this.copyFab.contains(e.target) &&
                this.selectedVerses.size > 0) {
                this.clearSelection();
            }
        });

        // Mobile long-press support
        let pressTimer;
        this.bibleContentEl.addEventListener('touchstart', (e) => {
            const verseWrapper = e.target.closest('.verse-wrapper');
            if (verseWrapper && !e.target.closest('.footnote') && !e.target.closest('.crossref')) {
                pressTimer = setTimeout(() => {
                    this.toggleVerseSelection(verseWrapper);
                    // Vibrate if supported
                    if (navigator.vibrate) {
                        navigator.vibrate(50);
                    }
                }, 500);
            }
        });

        this.bibleContentEl.addEventListener('touchend', () => {
            clearTimeout(pressTimer);
        });

        this.bibleContentEl.addEventListener('touchmove', () => {
            clearTimeout(pressTimer);
        });
    }

    // Toggle verse selection
    toggleVerseSelection(verseWrapper) {
        const verseId = verseWrapper.dataset.verseId;

        if (this.selectedVerses.has(verseId)) {
            // Deselect
            this.selectedVerses.delete(verseId);
            verseWrapper.classList.remove('selected');
        } else {
            // Select
            this.selectedVerses.set(verseId, {
                book: verseWrapper.dataset.book,
                chapter: parseInt(verseWrapper.dataset.chapter),
                verse: parseInt(verseWrapper.dataset.verse),
                text: this.cleanText(verseWrapper),
                element: verseWrapper
            });
            verseWrapper.classList.add('selected');
        }

        this.updateFab();
    }

    // Clean text (remove footnotes, verse numbers, extra spaces)
    cleanText(verseWrapper) {
        const clone = verseWrapper.cloneNode(true);

        // Remove footnote and crossref elements
        clone.querySelectorAll('.footnote, .crossref').forEach(el => el.remove());

        // Get text content and clean it up
        return clone.textContent
            .replace(/\[\d+\]/g, '')  // Remove any remaining footnote markers
            .replace(/\(\w+\)/g, '')  // Remove cross-reference markers
            .replace(/\s+/g, ' ')     // Normalize spaces
            .trim();
    }

    // Update FAB visibility and count
    updateFab() {
        const count = this.selectedVerses.size;
        const copyBtn = document.getElementById('copyVerseBtn');
        const clearBtn = document.getElementById('clearSelectionBtn');

        if (count > 0) {
            this.copyFab.classList.add('visible');
            this.verseCountBadge.textContent = count;
            // Reset button state when showing FAB
            copyBtn.disabled = false;
            copyBtn.innerHTML = 'üìã<span class="verse-count-badge" id="verseCountBadge">' + count + '</span>';
            clearBtn.style.display = 'flex'; // Show X button
        } else {
            this.copyFab.classList.remove('visible');
        }
    }

    // Copy selected verses to clipboard
    async copySelectedVerses() {
        if (this.selectedVerses.size === 0) return;

        const formattedText = this.formatSelectedVerses();
        const copyBtn = document.getElementById('copyVerseBtn');
        const clearBtn = document.getElementById('clearSelectionBtn');

        // Disable button to prevent double-clicks
        copyBtn.disabled = true;

        // Hide X button and change icon to checkmark (no badge)
        clearBtn.style.display = 'none';
        copyBtn.innerHTML = '‚úì';

        try {
            await navigator.clipboard.writeText(formattedText);
            this.showToast('Verses copied to clipboard!');
        } catch (err) {
            // Fallback for older browsers
            this.fallbackCopy(formattedText);
            return; // fallbackCopy handles the rest
        }

        // Wait 1.5 seconds, then clear selection
        setTimeout(() => {
            this.clearSelection();
        }, 1500);
    }

    // Format selected verses with references
    formatSelectedVerses() {
        const verses = Array.from(this.selectedVerses.values())
            .sort((a, b) => {
                if (a.chapter !== b.chapter) return a.chapter - b.chapter;
                return a.verse - b.verse;
            });

        if (verses.length === 0) return '';

        const book = verses[0].book;
        const chapter = verses[0].chapter;

        // Build reference
        let reference = `${book} ${chapter}:`;
        const verseNumbers = verses.map(v => v.verse);

        // Check if consecutive
        const isConsecutive = verseNumbers.every((num, idx) =>
            idx === 0 || num === verseNumbers[idx - 1] + 1
        );

        if (isConsecutive && verseNumbers.length > 1) {
            reference += `${verseNumbers[0]}-${verseNumbers[verseNumbers.length - 1]}`;
        } else {
            reference += verseNumbers.join(', ');
        }

        // Build text
        const text = verses.map(v => v.text).join(' ');

        return `${reference} - ${text}`;
    }

    // Fallback copy method
    fallbackCopy(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();

        const copyBtn = document.getElementById('copyVerseBtn');
        const clearBtn = document.getElementById('clearSelectionBtn');
        copyBtn.disabled = true;

        // Hide X button and change icon to checkmark (no badge)
        clearBtn.style.display = 'none';
        copyBtn.innerHTML = '‚úì';

        try {
            document.execCommand('copy');
            this.showToast('Verses copied to clipboard!');
        } catch (err) {
            this.showToast('Failed to copy verses');
            copyBtn.disabled = false; // Re-enable on failure
            clearBtn.style.display = 'flex'; // Show X button again on failure
            this.updateFab(); // Reset button state
        }

        document.body.removeChild(textarea);

        // Wait 1.5 seconds, then clear selection
        setTimeout(() => {
            this.clearSelection();
        }, 1500);
    }

    // Show toast notification
    showToast(message) {
        this.toast.textContent = message;
        this.toast.classList.add('show');

        setTimeout(() => {
            this.toast.classList.remove('show');
        }, 3000);
    }

    // Clear all selections
    clearSelection() {
        this.selectedVerses.forEach(verse => {
            verse.element.classList.remove('selected');
        });
        this.selectedVerses.clear();
        this.updateFab();
    }

    // Get book name from number
    getBookName(bookNum) {
        const books = {
            1: 'Genesis', 2: 'Exodus', 3: 'Leviticus', 4: 'Numbers', 5: 'Deuteronomy',
            6: 'Joshua', 7: 'Judges', 8: 'Ruth', 9: '1 Samuel', 10: '2 Samuel',
            11: '1 Kings', 12: '2 Kings', 13: '1 Chronicles', 14: '2 Chronicles',
            15: 'Ezra', 16: 'Nehemiah', 17: 'Esther', 18: 'Job', 19: 'Psalms',
            20: 'Proverbs', 21: 'Ecclesiastes', 22: 'Song of Solomon', 23: 'Isaiah',
            24: 'Jeremiah', 25: 'Lamentations', 26: 'Ezekiel', 27: 'Daniel',
            28: 'Hosea', 29: 'Joel', 30: 'Amos', 31: 'Obadiah', 32: 'Jonah',
            33: 'Micah', 34: 'Nahum', 35: 'Habakkuk', 36: 'Zephaniah', 37: 'Haggai',
            38: 'Zechariah', 39: 'Malachi', 40: 'Matthew', 41: 'Mark', 42: 'Luke',
            43: 'John', 44: 'Acts', 45: 'Romans', 46: '1 Corinthians', 47: '2 Corinthians',
            48: 'Galatians', 49: 'Ephesians', 50: 'Philippians', 51: 'Colossians',
            52: '1 Thessalonians', 53: '2 Thessalonians', 54: '1 Timothy', 55: '2 Timothy',
            56: 'Titus', 57: 'Philemon', 58: 'Hebrews', 59: 'James', 60: '1 Peter',
            61: '2 Peter', 62: '1 John', 63: '2 John', 64: '3 John', 65: 'Jude',
            66: 'Revelation'
        };
        return books[bookNum] || `Book ${bookNum}`;
    }
}

// Initialize verse selector when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        new VerseSelector();
    });
} else {
    new VerseSelector();
}
</script>
